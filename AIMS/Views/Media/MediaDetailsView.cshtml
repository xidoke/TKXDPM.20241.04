@model object

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
    string category = ViewBag.Category;
    dynamic product;

    if (category == "CD")
    {
        product = Model as AIMS.Data.Entities.CD;
    }
    else if (category == "Book")
    {
        product = Model as AIMS.Data.Entities.Book;
    }
    else
    {
        product = Model as AIMS.Data.Entities.DVD;
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storefront</title>
    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="~/css/detail.css" />

</head>
<div class="main-container">
    <div class="product-detail-container">
        <div class="product-image">
            <img src="@(string.IsNullOrEmpty(product.ImgUrl) ? "https://lh3.googleusercontent.com/proxy/-56r5n-QW7vIBsW2COmvoPJOHeQq6XbAeAc16UqoHGryZ1A1HfKkSQnCXiZAkxjmbdV5XYmv-z3_uR7THipN8UZuV-KIG21QhnEUtq2fbS8oFWz6_ZaI5gMV1EvzuccKJPn3KFUrtg" : product.ImgUrl)" alt="@product.Title" />
        </div>

        <div class="product-details">
            <h1 class="product-title">@product.Title</h1>

            <div class="product-price">
                <span class="price">@product.Price.ToString("N0")₫</span>
            </div>

            <div class="product-info">
                <h2>Thông tin chi tiết</h2>
                @if (category == "CD")
                {
                    <p><b>Nghệ sĩ:</b> @product.Artist</p>
                    <p><b>Bản ghi:</b> @product.RecordLabel</p>
                    <p><b>Danh sách Track:</b> @product.Tracklist</p>
                    <p><b>Ngày phát hành:</b> @product.ReleaseDate.ToString("dd/MM/yyyy")</p>
                }
                else if (category == "Book")
                {
                    <p><b>Tác giả:</b> @product.Author</p>
                    <p><b>Loại sách:</b> @product.CoverType</p>
                    <p><b>Nhà xuất bản:</b> @product.Publisher</p>
                    <p><b>Ngày xuất bản:</b> @product.PublishDate.ToString("dd/MM/yyyy")</p>
                    <p><b>Số trang:</b> @product.NumberOfPages</p>
                    <p><b>Ngôn ngữ:</b> @product.Language</p>
                }
                else if (category == "DVD")
                {
                    <p><b>Loại đĩa:</b> @product.DiscType</p>
                    <p><b>Đạo diễn:</b> @product.Director</p>
                    <p><b>Thời lượng:</b> @product.Runtime</p>
                    <p><b>Studio:</b> @product.Studio</p>
                    <p><b>Phụ đề:</b> @product.Subtitle</p>
                    <p><b>Ngày phát hành:</b> @product.ReleaseDate.ToString("dd/MM/yyyy")</p>
                }
            </div>

            <div class="product-actions">
                <form asp-controller="Cart" asp-action="AddToCart" method="post">
                    <input type="hidden" name="mediaID" value="@product.Id" />
                    <input type="hidden" name="mediaTitle" value="@product.Title" />
                    <input type="hidden" name="mediaPrice" value="@product.Price" />
                    <input type="hidden" name="mediaImgUrl" value="@product.ImgUrl" />
                    <input type="hidden" name="mediaQuantity" value="" /> @* Giá trị sẽ được gán bằng JavaScript *@
                    <div class="quantity">
                        <span>Số lượng</span>
                        <input type="number" min="1" value="1" name="quantity" /> @* Đặt name="quantity" *@
                    </div>
                    <br />

                    <button type="submit" class="add-to-cart">Thêm vào giỏ</button> @* Sửa thành button submit *@
                </form>
                <button class="place-order">Đặt hàng</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/detail.js"></script>
}
